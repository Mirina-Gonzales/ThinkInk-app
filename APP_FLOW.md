# ğŸš€ ThinkInk App - Flujo Completo

## ğŸ“Š Flujo General de Usuario

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USUARIO ACCEDE A LA APP                         â”‚
â”‚                    http://localhost:8502 (streamlit)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  PÃGINA DE INICIO (app.py)  â”‚
                    â”‚  - Welcome message          â”‚
                    â”‚  - Instrucciones            â”‚
                    â”‚  - CaracterÃ­sticas          â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                  â”‚                  â”‚
                â”‚     âœ“ NUEVO      â”‚     âœ“ NUEVO     â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
         â”‚  SELECTOR   â”‚    â”‚  SELECTOR   â”‚   â”‚  SELECTOR  â”‚
         â”‚  IDIOMA ğŸ‡ªğŸ‡¸ â”‚    â”‚  IDIOMA ğŸ‡¬ğŸ‡§ â”‚   â”‚  LIBRO ğŸ“š  â”‚
         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                â”‚                  â”‚               â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   SIDEBAR - NAVEGACIÃ“N      â”‚
                    â”‚   - ğŸ‡ªğŸ‡¸ EspaÃ±ol             â”‚
                    â”‚   - ğŸ‡¬ğŸ‡§ English             â”‚
                    â”‚   - ğŸ“š Principal            â”‚
                    â”‚   - ğŸ¤– Gemini AI            â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                          â”‚                          â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
   â”‚ ğŸ“š PRINCIPAL    â”‚    â”‚ ğŸ¤– GEMINI AI   â”‚    â”‚ ğŸ  HOME PAGE  â”‚
   â”‚ (Local)         â”‚    â”‚ (IA - Cloud)   â”‚    â”‚ (Bienvenida)  â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
        â”‚                          â”‚                       â”‚
        â”‚                          â”‚                       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ  PÃGINA 1: HOME (app.py) - Bienvenida

```
app.py (PÃGINA INICIAL)
â”‚
â”œâ”€ 1. CONFIGURACIÃ“N INICIAL
â”‚  â”œâ”€ st.set_page_config(...) â† Config Streamlit
â”‚  â””â”€ st.session_state â† Init language = "es"
â”‚
â”œâ”€ 2. SELECTOR DE IDIOMA (Sidebar)
â”‚  â”œâ”€ st.button("ğŸ‡ªğŸ‡¸ EspaÃ±ol")
â”‚  â”‚  â””â”€ st.session_state.language = "es"
â”‚  â”‚     â””â”€ st.rerun() â† Recarga con nuevo idioma
â”‚  â”‚
â”‚  â””â”€ st.button("ğŸ‡¬ğŸ‡§ English")
â”‚     â””â”€ st.session_state.language = "en"
â”‚        â””â”€ st.rerun() â† Recarga con nuevo idioma
â”‚
â”œâ”€ 3. OBTENER IDIOMA ACTUAL
â”‚  â””â”€ lang = st.session_state.language
â”‚
â”œâ”€ 4. MOSTRAR CONTENIDO BILINGÃœE
â”‚  â”œâ”€ st.title(t("app_title", lang))
â”‚  â”‚  â””â”€ Llama: i18n.get("app_title", lang)
â”‚  â”‚     â””â”€ translations.json
â”‚  â”‚        â”œâ”€ ES: "ğŸ¤– ThinkInk - AnÃ¡lisis de Libros"
â”‚  â”‚        â””â”€ EN: "ğŸ¤– ThinkInk - Book Analysis"
â”‚  â”‚
â”‚  â”œâ”€ st.markdown(t("app_subtitle", lang))
â”‚  â”œâ”€ Instrucciones bilingÃ¼es
â”‚  â”œâ”€ CaracterÃ­sticas
â”‚  â”œâ”€ Comparativa
â”‚  â””â”€ ConfiguraciÃ³n Gemini
â”‚
â””â”€ 5. NAVEGACIÃ“N HACIA OTRAS PÃGINAS
   â””â”€ Sidebar muestra: ğŸ“š Principal | ğŸ¤– Gemini AI
      â””â”€ Usuario hace clic en cualquiera
```

---

## ğŸ“š PÃGINA 2: PRINCIPAL (01_ğŸ“š_Principal.py) - AnÃ¡lisis Reflexivo

```
pages/01_ğŸ“š_Principal.py
â”‚
â”œâ”€ 1. INICIALIZACIÃ“N
â”‚  â”œâ”€ from src.i18n import t
â”‚  â”œâ”€ from src.services.book_service import BookService
â”‚  â”œâ”€ lang = st.session_state.get("language", "es")
â”‚  â””â”€ book_service = BookService()
â”‚
â”œâ”€ 2. SIDEBAR - SELECCIÃ“N DE LIBRO
â”‚  â”œâ”€ st.header(t("sidebar_select_book", lang))
â”‚  â”œâ”€ books = book_service.get_all_books() â† Carga data/books.json
â”‚  â”‚  â””â”€ [10 libros clÃ¡sicos]
â”‚  â”‚
â”‚  â”œâ”€ st.selectbox(t("choose_book", lang), books)
â”‚  â”‚  â””â”€ Usuario selecciona libro
â”‚  â”‚
â”‚  â””â”€ selected_book = book_service.get_book_by_title(selected_title)
â”‚
â”œâ”€ 3. MOSTRAR INFORMACIÃ“N DEL LIBRO
â”‚  â”œâ”€ st.info(
â”‚  â”‚    f"ğŸ“š {selected_book.title}
â”‚  â”‚     âœï¸ {selected_book.author}
â”‚  â”‚     ğŸ“– {selected_book.year} | {selected_book.genre}
â”‚  â”‚     ğŸ¯ {selected_book.theme}")
â”‚  â”‚
â”‚  â””â”€ ESTRUCTURA Book:
â”‚     â”œâ”€ id
â”‚     â”œâ”€ title
â”‚     â”œâ”€ author
â”‚     â”œâ”€ year
â”‚     â”œâ”€ genre
â”‚     â”œâ”€ theme â† NUEVO
â”‚     â”œâ”€ description
â”‚     â”œâ”€ pre_questions
â”‚     â”œâ”€ post_questions
â”‚     â””â”€ author_bio
â”‚
â”œâ”€ 4. TABS - CONTENIDO REFLEXIVO
â”‚  â”‚
â”‚  â”œâ”€ TAB 1: INFORMACIÃ“N DEL LIBRO
â”‚  â”‚  â””â”€ Muestra detalles + descripciÃ³n
â”‚  â”‚
â”‚  â”œâ”€ TAB 2: PREGUNTAS PREVIAS â“
â”‚  â”‚  â”œâ”€ st.subheader(t("principal_pre_questions", lang))
â”‚  â”‚  â”œâ”€ st.write(t("principal_pre_questions_desc", lang))
â”‚  â”‚  â”‚  â””â”€ "Responde ANTES de leer"
â”‚  â”‚  â”‚
â”‚  â”‚  â”œâ”€ MOSTRAR 3 PREGUNTAS:
â”‚  â”‚  â”‚  â””â”€ for i, question in enumerate(selected_book.pre_questions):
â”‚  â”‚  â”‚     â””â”€ st.write(f"{i+1}. {question}")
â”‚  â”‚  â”‚
â”‚  â”‚  â”œâ”€ ÃREA PARA RESPUESTAS:
â”‚  â”‚  â”‚  â””â”€ st.text_area(t("answer_placeholder", lang))
â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€ BOTÃ“N GUARDAR:
â”‚  â”‚     â””â”€ if st.button(t("btn_save_pre_answers", lang)):
â”‚  â”‚        â””â”€ st.success(t("success_pre_answers", lang))
â”‚  â”‚
â”‚  â”œâ”€ TAB 3: PREGUNTAS FINALES â“
â”‚  â”‚  â”œâ”€ st.subheader(t("principal_post_questions", lang))
â”‚  â”‚  â”œâ”€ st.write(t("principal_post_questions_desc", lang))
â”‚  â”‚  â”‚  â””â”€ "Responde DESPUÃ‰S de leer"
â”‚  â”‚  â”‚
â”‚  â”‚  â”œâ”€ MOSTRAR 3 PREGUNTAS:
â”‚  â”‚  â”‚  â””â”€ for i, question in enumerate(selected_book.post_questions):
â”‚  â”‚  â”‚     â””â”€ st.write(f"{i+1}. {question}")
â”‚  â”‚  â”‚
â”‚  â”‚  â”œâ”€ ÃREA PARA RESPUESTAS:
â”‚  â”‚  â”‚  â””â”€ st.text_area(t("answer_placeholder", lang))
â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€ BOTÃ“N GUARDAR:
â”‚  â”‚     â””â”€ if st.button(t("btn_save_post_answers", lang)):
â”‚  â”‚        â””â”€ st.success(t("success_post_answers", lang))
â”‚  â”‚
â”‚  â””â”€ TAB 4: SOBRE EL AUTOR âœï¸
â”‚     â”œâ”€ st.subheader(t("principal_author_bio", lang))
â”‚     â””â”€ st.write(selected_book.author_bio)
â”‚        â””â”€ Muestra biografÃ­a del autor
â”‚
â””â”€ 5. COMPARATIVA (Expandible)
   â””â”€ st.expander(t("comparison_title", lang))
      â”œâ”€ Ventajas enfoque reflexivo
      â””â”€ vs. Ventajas enfoque IA
```

---

## ğŸ¤– PÃGINA 3: GEMINI AI (02_ğŸ¤–_Gemini_AI.py) - AnÃ¡lisis con IA

```
pages/02_ğŸ¤–_Gemini_AI.py
â”‚
â”œâ”€ 1. INICIALIZACIÃ“N
â”‚  â”œâ”€ from src.i18n import t
â”‚  â”œâ”€ from src.services.gemini_service import GeminiService
â”‚  â”œâ”€ from src.services.book_service import BookService
â”‚  â”œâ”€ lang = st.session_state.get("language", "es")
â”‚  â”œâ”€ gemini_service = GeminiService() â† Conecta Gemini
â”‚  â””â”€ book_service = BookService()
â”‚
â”œâ”€ 2. SIDEBAR - SELECTOR DE LIBRO (3 OPCIONES) ğŸ“š
â”‚  â”‚
â”‚  â”œâ”€ OPCIÃ“N 1: DE LA LISTA
â”‚  â”‚  â”œâ”€ st.radio(t("input_mode", lang), 
â”‚  â”‚  â”‚           [t("input_mode_list", lang), ...])
â”‚  â”‚  â”‚
â”‚  â”‚  â”œâ”€ Si seleccionÃ³ "De la lista":
â”‚  â”‚  â”‚  â”œâ”€ books = book_service.get_all_books()
â”‚  â”‚  â”‚  â”œâ”€ st.selectbox(t("choose_book", lang))
â”‚  â”‚  â”‚  â””â”€ selected_book = book_service.get_book_by_title(title)
â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€ selected_book â†’ Libro de los 10 predefinidos
â”‚  â”‚
â”‚  â”œâ”€ OPCIÃ“N 2: INGRESO PERSONALIZADO ğŸ¬
â”‚  â”‚  â”œâ”€ Si seleccionÃ³ "Ingreso personalizado":
â”‚  â”‚  â”‚
â”‚  â”‚  â”œâ”€ FORMULARIO:
â”‚  â”‚  â”‚  â”œâ”€ title = st.text_input(t("custom_title", lang))
â”‚  â”‚  â”‚  â”œâ”€ author = st.text_input(t("custom_author", lang))
â”‚  â”‚  â”‚  â”œâ”€ year = st.number_input(t("custom_year", lang))
â”‚  â”‚  â”‚  â”œâ”€ genre = st.text_input(t("custom_genre", lang))
â”‚  â”‚  â”‚  â”œâ”€ theme = st.text_input(t("custom_theme", lang))
â”‚  â”‚  â”‚  â”‚            â””â”€ âœ¨ NUEVO CAMPO
â”‚  â”‚  â”‚  â””â”€ description = st.text_area(t("custom_description", lang))
â”‚  â”‚  â”‚
â”‚  â”‚  â”œâ”€ VALIDACIÃ“N:
â”‚  â”‚  â”‚  â””â”€ if title and author:
â”‚  â”‚  â”‚     â””â”€ selected_book = Book(...)
â”‚  â”‚  â”‚        â””â”€ Crea objeto dinÃ¡mico
â”‚  â”‚  â”‚     â””â”€ st.success(t("book_created", lang))
â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€ selected_book â†’ Libro temporal creado (ID=999)
â”‚  â”‚
â”‚  â””â”€ OPCIÃ“N 3: BÃšSQUEDA INTELIGENTE (TOP 3) ğŸ”
â”‚     â”œâ”€ Si seleccionÃ³ "BÃºsqueda inteligente":
â”‚     â”‚
â”‚     â”œâ”€ SUB-OPCIÃ“N A: POR TÃTULO
â”‚     â”‚  â”œâ”€ search_query = st.text_input(t("search_title_input", lang))
â”‚     â”‚  â”œâ”€ st.session_state.search_mode = "titles"
â”‚     â”‚  â””â”€ st.session_state.search_query = search_query
â”‚     â”‚     â””â”€ Guarda criterio de bÃºsqueda
â”‚     â”‚
â”‚     â”œâ”€ SUB-OPCIÃ“N B: POR AUTOR
â”‚     â”‚  â”œâ”€ search_query = st.text_input(t("search_author_input", lang))
â”‚     â”‚  â”œâ”€ st.session_state.search_mode = "author"
â”‚     â”‚  â””â”€ st.session_state.search_query = search_query
â”‚     â”‚
â”‚     â””â”€ SUB-OPCIÃ“N C: POR TEMA âœ¨ NUEVO
â”‚        â”œâ”€ theme_query = st.text_input(t("search_theme_input", lang))
â”‚        â”œâ”€ st.session_state.search_mode = "theme"
â”‚        â””â”€ st.session_state.search_query = theme_query
â”‚
â”œâ”€ 3. CONTENIDO PRINCIPAL
â”‚  â”‚
â”‚  â”œâ”€ MOSTRAR LIBRO SELECCIONADO:
â”‚  â”‚  â””â”€ st.info(f"ğŸ“š {selected_book.title}
â”‚  â”‚            âœï¸ {selected_book.author}
â”‚  â”‚            ğŸ¯ {selected_book.theme}")
â”‚  â”‚
â”‚  â”œâ”€ DETECTAR MODO DE BÃšSQUEDA:
â”‚  â”‚  â”œâ”€ search_mode = st.session_state.get("search_mode")
â”‚  â”‚  â”œâ”€ search_query = st.session_state.get("search_query")
â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€ IF NO ES BÃšSQUEDA â†’ MOSTRAR TABS
â”‚  â”‚     â”‚
â”‚  â”‚     â”œâ”€ TAB 1: RESUMEN ğŸ“–
â”‚  â”‚     â”‚  â”œâ”€ st.button(t("btn_summary", lang))
â”‚  â”‚     â”‚  â”œâ”€ with st.spinner(...):
â”‚  â”‚     â”‚  â”‚  â””â”€ summary = gemini_service.get_book_summary(selected_book)
â”‚  â”‚     â”‚  â”‚     â”œâ”€ PROMPT A GEMINI:
â”‚  â”‚     â”‚  â”‚     â”‚  â””â”€ "Proporciona resumen de '{title}' por {author}"
â”‚  â”‚     â”‚  â”‚     â”‚     + Guardrails (solo libros, sin discriminaciÃ³n)
â”‚  â”‚     â”‚  â”‚     â””â”€ RESPUESTA GEMINI â† Google Gemini 2.0-flash
â”‚  â”‚     â”‚  â”‚
â”‚  â”‚     â”‚  â””â”€ st.download_button(t("download_summary", lang))
â”‚  â”‚     â”‚     â””â”€ Descarga: {titulo}_resumen.txt
â”‚  â”‚     â”‚
â”‚  â”‚     â”œâ”€ TAB 2: TEMAS Y PERSONAJES ğŸ­
â”‚  â”‚     â”‚  â”œâ”€ gemini_service.analyze_themes_and_characters(book)
â”‚  â”‚     â”‚  â””â”€ AnÃ¡lisis profundo con Gemini
â”‚  â”‚     â”‚
â”‚  â”‚     â”œâ”€ TAB 3: EXPLICAR CONCEPTO ğŸ’¡
â”‚  â”‚     â”‚  â”œâ”€ concept = st.text_input(t("concept_input", lang))
â”‚  â”‚     â”‚  â”œâ”€ gemini_service.explain_concept(book, concept)
â”‚  â”‚     â”‚  â””â”€ Explica concepto en contexto del libro
â”‚  â”‚     â”‚
â”‚  â”‚     â”œâ”€ TAB 4: RECOMENDACIONES â­
â”‚  â”‚     â”‚  â”œâ”€ interests = st.text_area(t("interests_input", lang))
â”‚  â”‚     â”‚  â”œâ”€ gemini_service.get_book_recommendations(book, interests)
â”‚  â”‚     â”‚  â””â”€ Sugiere 5 libros similares
â”‚  â”‚     â”‚
â”‚  â”‚     â”œâ”€ TAB 5: PREGUNTAS DE DISCUSIÃ“N â“
â”‚  â”‚     â”‚  â”œâ”€ gemini_service.generate_discussion_questions(book)
â”‚  â”‚     â”‚  â””â”€ Genera 8-10 preguntas profundas
â”‚  â”‚     â”‚
â”‚  â”‚     â””â”€ TAB 6: COMPARAR CON OTRO LIBRO ğŸ”„
â”‚  â”‚        â”œâ”€ book2_title = st.selectbox(t("compare_book", lang))
â”‚  â”‚        â”œâ”€ book2 = book_service.get_book_by_title(book2_title)
â”‚  â”‚        â”œâ”€ gemini_service.compare_books(selected_book, book2)
â”‚  â”‚        â””â”€ Comparativa detallada entre 2 libros
â”‚  â”‚
â”‚  â””â”€ IF ES BÃšSQUEDA â†’ MOSTRAR RESULTADOS
â”‚     â”‚
â”‚     â”œâ”€ SI search_mode == "titles"
â”‚     â”‚  â”œâ”€ st.info(f"ğŸ” Buscando similares a '{search_query}'")
â”‚     â”‚  â”œâ”€ st.button(t("btn_search_titles", lang))
â”‚     â”‚  â”œâ”€ results = gemini_service.search_similar_books(search_query)
â”‚     â”‚  â”‚  â””â”€ PROMPT A GEMINI:
â”‚     â”‚  â”‚     â””â”€ "Top 3 libros similares a '{search_query}'"
â”‚     â”‚  â””â”€ Descarga: similares_a_{titulo}.txt
â”‚     â”‚
â”‚     â”œâ”€ SI search_mode == "author"
â”‚     â”‚  â”œâ”€ st.info(f"ğŸ‘¤ Mejores obras de '{search_query}'")
â”‚     â”‚  â”œâ”€ st.button(t("btn_search_author", lang))
â”‚     â”‚  â”œâ”€ results = gemini_service.search_author_works(search_query)
â”‚     â”‚  â”‚  â””â”€ PROMPT A GEMINI:
â”‚     â”‚  â”‚     â””â”€ "Top 3 mejores obras del autor '{search_query}'"
â”‚     â”‚  â””â”€ Descarga: obras_{autor}.txt
â”‚     â”‚
â”‚     â””â”€ SI search_mode == "theme" âœ¨ NUEVO
â”‚        â”œâ”€ st.info(f"ğŸ¯ Libros sobre '{search_query}'")
â”‚        â”œâ”€ st.button(t("btn_search_theme", lang))
â”‚        â”œâ”€ results = gemini_service.search_books_by_theme(search_query)
â”‚        â”‚  â””â”€ PROMPT A GEMINI:
â”‚        â”‚     â””â”€ "Top 3 libros que abordan el tema '{search_query}'"
â”‚        â””â”€ Descarga: libros_sobre_{tema}.txt
â”‚
â””â”€ 4. SETUP GEMINI (Expandible)
   â””â”€ st.expander(t("gemini_setup", lang))
      â””â”€ Instrucciones para obtener API key
```

---

## ğŸ”„ FLUJO DE DATOS - Arquitectura

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ENTRADA DE DATOS                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                  â”‚                  â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
   â”‚ List of â”‚        â”‚  User   â”‚      â”‚ Gemini AI â”‚
   â”‚  Books  â”‚        â”‚  Input  â”‚      â”‚   Cloud   â”‚
   â”‚(JSON)   â”‚        â”‚  Form   â”‚      â”‚  Requests â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
        â”‚                  â”‚                  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  SERVICIOS   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                  â”‚                  â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
   â”‚BookService   â”‚   â”‚QuestionSvc â”‚    â”‚GeminiSvc  â”‚
   â”‚- load_books()â”‚   â”‚- get_Q()   â”‚    â”‚- analyze()â”‚
   â”‚- get_book()  â”‚   â”‚- get_post()â”‚    â”‚- search() â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
        â”‚                  â”‚                  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   MODELS     â”‚
                    â”‚   Book class â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                  â”‚                  â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚    TRANSLACIÃ“N (i18n)        â”‚      â”‚ STREAMLIT   â”‚
   â”‚    - translations.json       â”‚      â”‚ Components  â”‚
   â”‚    - i18n_service.py         â”‚      â”‚ (UI/Pages)  â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                                      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   BROWSER    â”‚
                    â”‚  http://     â”‚
                    â”‚ localhost:   â”‚
                    â”‚   8502       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸŒ FLUJO DE INTERNACIONALIZACIÃ“N (i18n)

```
USUARIO SELECCIONA IDIOMA
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ st.button("ğŸ‡ªğŸ‡¸ EspaÃ±ol") â”‚  â”€â”€â”
â”‚  st.button("ğŸ‡¬ğŸ‡§ English")â”‚  â”€â”€â”¤
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
             â”‚                 â”‚
             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ st.session_stateâ”‚
                â”‚.language = "es" â”‚
                â”‚    or "en"      â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ Todas las pÃ¡ginas:     â”‚
                â”‚ lang = st.session_stateâ”‚
                â”‚ .get('language','es')  â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚               â”‚               â”‚
        â–¼               â–¼               â–¼
    app.py          pages/*.py       src/ui/*.py
        â”‚               â”‚               â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ t(key, lang)         â”‚
                â”‚ FunciÃ³n de traducciÃ³nâ”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ i18n_service.py:           â”‚
                â”‚ i18n.get(key, lang)        â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ translations.json:         â”‚
                â”‚ {                          â”‚
                â”‚  "es": {...},              â”‚
                â”‚  "en": {...}               â”‚
                â”‚ }                          â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                               â”‚
        â–¼                               â–¼
   "EspaÃ±ol"                       "English"
        â”‚                               â”‚
        â”‚  t("app_title", "es")         â”‚  t("app_title", "en")
        â”‚                               â”‚
        â–¼                               â–¼
   "ğŸ¤– ThinkInk -              "ğŸ¤– ThinkInk -
    AnÃ¡lisis de Libros"         Book Analysis"
        â”‚                               â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ RENDERIZAR EN UI  â”‚
                â”‚ (Streamlit)       â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¡ FLUJO GEMINI AI

```
USUARIO SOLICITA ANÃLISIS
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Usuario hace click en botÃ³n  â”‚
â”‚ (ej: "ğŸ“– Generar resumen")   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ st.spinner()  â”‚
    â”‚ âœ¨ Analizando â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ GeminiService()     â”‚
   â”‚ .get_book_summary() â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ genai.GenerativeModel()          â”‚
   â”‚ "gemini-2.0-flash"               â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ PROMPT A GEMINI:                   â”‚
   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
   â”‚ "Proporciona resumen de            â”‚
   â”‚  '{title}' de {author}             â”‚
   â”‚                                    â”‚
   â”‚  RESTRICCIONES:                    â”‚
   â”‚  - Solo LIBROS                     â”‚
   â”‚  - Sin malas palabras              â”‚
   â”‚  - Sin discriminaciÃ³n              â”‚
   â”‚  - Tono acadÃ©mico"                 â”‚
   â”‚                                    â”‚
   â”‚ + InformaciÃ³n del libro            â”‚
   â”‚ + Tema principal                   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ HTTP Request
           â”‚ API KEY (from .env)
           â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ GOOGLE GEMINI API       â”‚
   â”‚ Cloud Endpoint          â”‚
   â”‚ (generativeai.google)   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”‚ LLM Processing
            â”‚ (Gemini 2.0-flash)
            â”‚
            â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ AI Response         â”‚
   â”‚ JSON + Text         â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ response.text        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ st.markdown(response)      â”‚
   â”‚ Mostrar resultado en app   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ st.download_button()       â”‚
   â”‚ Permitir descargar .txt    â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š FLUJO DE BÃšSQUEDA INTELIGENTE (Top 3)

```
USUARIO SELECCIONA "BÃšSQUEDA INTELIGENTE"
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3 OPCIONES:                     â”‚
â”‚ A) Por TÃ­tulo (similares)       â”‚
â”‚ B) Por Autor (mejores obras)    â”‚
â”‚ C) Por Tema (libros sobre tema) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚               â”‚              â”‚              â”‚
   â–¼               â–¼              â–¼              â–¼
OPCIÃ“N A      OPCIÃ“N B        OPCIÃ“N C     
"Por TÃ­tulo"  "Por Autor"     "Por Tema" (NEW)
   â”‚               â”‚              â”‚
   â–¼               â–¼              â–¼
search_     search_         search_
query=      query=          query=
"El         "Stephen        "Amistad"
Hobbit"     King"

   â”‚               â”‚              â”‚
   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ gemini_service.search_*()       â”‚
   â”‚ (uno de 3 mÃ©todos)              â”‚
   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ PROMPT A GEMINI:                â”‚
   â”‚ "Top 3 libros similares a..."   â”‚
   â”‚ "Top 3 obras de..."             â”‚
   â”‚ "Top 3 libros sobre..."         â”‚
   â”‚                                 â”‚
   â”‚ RETORNA:                        â”‚
   â”‚ - TÃ­tulo + Autor                â”‚
   â”‚ - AÃ±o                           â”‚
   â”‚ - GÃ©nero                        â”‚
   â”‚ - Por quÃ© es similar/destacado  â”‚
   â”‚ - Sinopsis (2-3 lÃ­neas)         â”‚
   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ st.markdown(results)            â”‚
   â”‚ Mostrar Top 3                   â”‚
   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ st.download_button()            â”‚
   â”‚ Descargar: similares_a_*.txt    â”‚
   â”‚          obras_*.txt            â”‚
   â”‚          libros_sobre_*.txt     â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”’ FLUJO DE VALIDACIÃ“N Y GUARDRAILS

```
USUARIO INGRESA INFORMACIÃ“N
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Es una pelÃ­cula?            â”‚ â”€â”€â”€â”€â”€â”
â”‚ Â¿Series? Â¿Videojuego?      â”‚ â”€â”€â”€â”€â”€â”¤
â”‚ Â¿Otro contenido no-libro?  â”‚ â”€â”€â”€â”€â”€â”¤
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
     â”‚                               â”‚
     NO                              YES
     â”‚                               â”‚
     â–¼                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Es un libro  â”‚        â”‚ âŒ RECHAZAR            â”‚
â”‚ vÃ¡lido       â”‚        â”‚ "Lo siento, solo      â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚ analizo LIBROS.       â”‚
     â”‚                  â”‚ '{content}' no es    â”‚
     â–¼                  â”‚ un libro"             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ ENVIAR A GEMINI      â”‚
â”‚ + GUARDRAILS         â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PROMPT CON RESTRICCIONES:        â”‚
â”‚                                  â”‚
â”‚ "IMPORTANTE:                     â”‚
â”‚  - Solo LIBROS (novelas,        â”‚
â”‚    ensayos, poesÃ­a, etc)        â”‚
â”‚  - NO pelÃ­culas                 â”‚
â”‚  - NO series                    â”‚
â”‚  - NO videojuegos               â”‚
â”‚                                  â”‚
â”‚  - NO lenguaje ofensivo         â”‚
â”‚  - NO discriminatorio            â”‚
â”‚  - NO hate speech               â”‚
â”‚                                  â”‚
â”‚  - Tono acadÃ©mico               â”‚
â”‚  - Respetuoso                   â”‚
â”‚  - Inclusivo"                   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Gemini verifica y respeta  â”‚
â”‚ los guardrails             â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ RESPUESTA VÃLIDA          â”‚
â”‚ Mostrar anÃ¡lisis           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—‚ï¸ ESTRUCTURA DE ARCHIVOS - Flujo de Imports

```
USUARIO ACCEDE
    â”‚
    â–¼
pages/ o app.py (ENTRY POINT)
    â”‚
    â”œâ”€ import streamlit as st
    â”œâ”€ from dotenv import load_dotenv
    â”œâ”€ from src.i18n import t â—„â”€â”
    â”œâ”€ from src.services.* import * â—„â”€â”¤
    â””â”€ from src.ui.* import * â—„â”€â”¤
                                  â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”œâ”€ src/
        â”‚  â”œâ”€ i18n/
        â”‚  â”‚  â”œâ”€ __init__.py â—„â”€ from i18n_service.py import t
        â”‚  â”‚  â”œâ”€ i18n_service.py â—„â”€ class I18nService
        â”‚  â”‚  â””â”€ translations.json â—„â”€ 100+ claves (ES/EN)
        â”‚  â”‚
        â”‚  â”œâ”€ models/
        â”‚  â”‚  â””â”€ book.py â—„â”€ @dataclass Book
        â”‚  â”‚
        â”‚  â”œâ”€ services/
        â”‚  â”‚  â”œâ”€ book_service.py â—„â”€ BookService.get_all_books()
        â”‚  â”‚  â”œâ”€ gemini_service.py â—„â”€ GeminiService.analyze_*()
        â”‚  â”‚  â”œâ”€ question_service.py
        â”‚  â”‚  â””â”€ author_service.py
        â”‚  â”‚
        â”‚  â””â”€ ui/
        â”‚     â””â”€ gemini_page.py â—„â”€ display_gemini_page()
        â”‚
        â”œâ”€ config/
        â”‚  â””â”€ settings.py â—„â”€ STREAMLIT_CONFIG, PATHS
        â”‚
        â”œâ”€ data/
        â”‚  â””â”€ books.json â—„â”€ 10 libros con Q&A
        â”‚
        â””â”€ tests/
           â””â”€ test_book_service.py â—„â”€ 3/3 tests pasadas
```

---

## âš¡ FLUJO COMPLETO DE UNA SESIÃ“N

```
1. USUARIO ABRE APP
   â†“ http://localhost:8502
   â†“

2. HOME PAGE (app.py)
   â”œâ”€ Carga configuraciÃ³n
   â”œâ”€ Init session_state.language = "es"
   â”œâ”€ Muestra selector idioma
   â””â”€ Usuario selecciona ğŸ‡ªğŸ‡¸ o ğŸ‡¬ğŸ‡§
   â†“

3. USUARIO NAVEGA A "ğŸ“š PRINCIPAL"
   â”œâ”€ PÃ¡gina carga con idioma seleccionado
   â”œâ”€ BookService carga 10 libros de JSON
   â”œâ”€ Usuario selecciona libro
   â””â”€ Muestra 4 tabs:
      - InformaciÃ³n
      - Preguntas previas â“
      - Preguntas finales â“
      - Sobre el autor âœï¸
   â†“

4. USUARIO RESPONDE PREGUNTAS
   â”œâ”€ Lee preguntas previas
   â”œâ”€ Escribe respuestas
   â””â”€ Hace clic "Guardar"
   â†“

5. USUARIO NAVEGA A "ğŸ¤– GEMINI AI"
   â”œâ”€ Selecciona modo (lista/custom/bÃºsqueda)
   â”œâ”€ Elige libro
   â””â”€ Muestra 6 tabs de anÃ¡lisis IA
   â†“

6. USUARIO SOLICITA ANÃLISIS
   â”œâ”€ Hace clic en botÃ³n (ej: "Generar resumen")
   â”œâ”€ GeminiService prepara prompt
   â”œâ”€ EnvÃ­a a Google Gemini API
   â”œâ”€ Gemini responde
   â”œâ”€ Muestra resultado
   â””â”€ Usuario descarga anÃ¡lisis
   â†“

7. USUARIO CAMBIA IDIOMA
   â”œâ”€ Hace clic ğŸ‡¬ğŸ‡§ English (en sidebar)
   â”œâ”€ App recarga con st.rerun()
   â”œâ”€ TODO cambia a inglÃ©s automÃ¡ticamente
   â””â”€ Contenido dinÃ¡mico sigue en inglÃ©s
   â†“

8. USUARIO CIERRA APP
   â””â”€ SesiÃ³n termina
```

---

## ğŸ¯ RESUMEN VISUAL

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                â”‚
â”‚                    ğŸŒ THINKINĞš APP FLOW                        â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚           ENTRADA                                       â”‚ â”‚
â”‚  â”‚  Usuario â†’ http://localhost:8502                        â”‚ â”‚
â”‚  â”‚  â†“                                                       â”‚ â”‚
â”‚  â”‚  Selecciona idioma (ğŸ‡ªğŸ‡¸/ğŸ‡¬ğŸ‡§)                             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                     â”‚                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚         NAVEGACIÃ“N (SIDEBAR)                           â”‚ â”‚
â”‚  â”‚  â€¢ ğŸ  Home                                             â”‚ â”‚
â”‚  â”‚  â€¢ ğŸ“š Principal (ReflexiÃ³n Local)                      â”‚ â”‚
â”‚  â”‚  â€¢ ğŸ¤– Gemini AI (AnÃ¡lisis IA Cloud)                    â”‚ â”‚
â”‚  â”‚  â€¢ ğŸ‡ªğŸ‡¸/ğŸ‡¬ğŸ‡§ Selector de Idioma                           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                 â”‚                     â”‚            â”‚   â”‚
â”‚  â–¼                 â–¼                     â–¼            â–¼   â”‚
â”‚ HOME            PRINCIPAL              GEMINI AI     INFO â”‚
â”‚ (Welcome)       (ReflexiÃ³n)            (IA)              â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€            â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚
â”‚ â€¢ Docs          â€¢ 10 Libros             â€¢ 10 Libros       â”‚
â”‚ â€¢ Features      â€¢ Pre-Q                 â€¢ Custom          â”‚
â”‚ â€¢ Setup         â€¢ Post-Q                â€¢ Search Top 3    â”‚
â”‚ â€¢ Tips          â€¢ Author Bio            â€¢ 6 anÃ¡lisis      â”‚
â”‚                 â€¢ Comparativa           â€¢ Descargas       â”‚
â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚           SERVICIOS (Backend)                      â”‚  â”‚
â”‚  â”‚  â”œâ”€ BookService (CRUD)                           â”‚  â”‚
â”‚  â”‚  â”œâ”€ QuestionService (Preguntas)                  â”‚  â”‚
â”‚  â”‚  â”œâ”€ AuthorService (Bios)                         â”‚  â”‚
â”‚  â”‚  â”œâ”€ GeminiService (IA API)                       â”‚  â”‚
â”‚  â”‚  â””â”€ I18nService (Traducciones)                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚           DATOS (Persistencia)                     â”‚  â”‚
â”‚  â”‚  â”œâ”€ data/books.json (10 libros)                   â”‚  â”‚
â”‚  â”‚  â”œâ”€ src/i18n/translations.json (100+ keys)        â”‚  â”‚
â”‚  â”‚  â””â”€ session_state (idioma del usuario)            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚           APIs EXTERNAS                            â”‚  â”‚
â”‚  â”‚  â””â”€ Google Gemini API (Cloud)                      â”‚  â”‚
â”‚  â”‚     â””â”€ genai.GenerativeModel("gemini-2.0-flash")  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**VersiÃ³n:** 2.0 (Final)  
**Actualizado:** Febrero 2025  
**Estado:** âœ… Documentado Completamente
